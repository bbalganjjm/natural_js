/*
 Natural-TEMPLATE v0.3.11

 Released under the LGPL v2.1 license
 Date: 2019-02-28T18:00Z

 Copyright 2023 KIM HWANG MAN(bbalganjjm@gmail.com)
*/
(function(x,p){N.version["Natural-TEMPLATE"]="0.3.11";(function(b){var u=b.template={design:{material:function(c){String.prototype.includes||Object.defineProperty(String.prototype,"includes",{enumerable:!1,writable:!0,value:function(d,a){"number"!==typeof a&&(a=0);return a+d.length>this.length?!1:-1!==this.indexOf(d,a)}});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,writable:!0,value:function(d,a){var f=Object(this),h=parseInt(f.length)||0;if(0===h)return!1;
a=parseInt(a)||0;0<=a||(a=h+a,0>a&&(a=0));for(var k;a<h;){k=f[a];if(d===k||d!==d&&k!==k)return!0;a++}return!1}});p.getScript("js/natural_js/lib/material/material-components-web.min.js").done(function(d,a,f){p("<link/>",{rel:"stylesheet",type:"text/css",href:"js/natural_js/css/natural.ui."+b.context.attr("template").design+".css"}).appendTo("head");p("<link/>",{rel:"stylesheet",type:"text/css",href:"css/common."+b.context.attr("template").design+".css"}).appendTo("head");p("<link/>",{rel:"stylesheet",
type:"text/css",href:"js/natural_js/lib/material/icon"+(b.browser.is("ie")?"_ie":"")+".css"}).appendTo("head");p("<link/>",{rel:"stylesheet",type:"text/css",href:"js/natural_js/lib/material/material-components-web.min.css"}).appendTo("head");void 0===b.context.attr("ui").button&&(b.context.attr("ui").button={});b.context.attr("ui").button.customStyle=!0;b.context.attr("ui").alert.onBeforeShow=b.context.attr("ui").popup.onBeforeShow=u.aop.design.material.onBeforeShow;b.context.attr("ui").grid.misc.fixedcolHeadMarginTop=
b.browser.is("ie")||b.browser.is("firefox")?-1:0;b.context.attr("ui").grid.misc.fixedcolHeadHeight=b.browser.is("ie")||b.browser.is("firefox")?2:1;b.context.attr("ui").grid.misc.fixedcolBodyMarginTop=b.browser.is("ie")?0:b.browser.is("firefox")?-1:0;c()}).fail(function(d){b.log(d);b.context.attr("template").design=void 0;c()})}},aop:{design:{material:{init:function(c,d){d?(this.button(c),this.textfield(c),this.select(c)):(this.iconButton(c),this.list(c))},button:function(c){b(".mdc-button",c.view).each(function(d,
a){a.className=b.string.trimToEmpty(a.className.replace(/btn_.*?__/g,""));d=a.getAttribute("data-icon");var f='<div class="mdc-button__ripple"></div>';d&&(d='<span class="material-icons mdc-icon-button__icon">'+d+"</span>",0<b.string.trimToEmpty(a.innerText).length&&(d+="&nbsp;"),f+=d);0<b.string.trimToEmpty(a.innerText).length&&(f+='<span class="mdc-button__label">'+a.innerText+"</span>");a.innerHTML=f;mdc.ripple.MDCRipple.attachTo(a)})},iconButton:function(c){b(".mdc-icon-button",c.view).each(function(d,
a){a.className="material-icons mdc-ripple-upgraded--unbounded mdc-ripple-upgraded "+b.string.trimToEmpty(a.className.replace(/btn_.*?__/g,""));mdc.ripple.MDCRipple.attachTo(a).unbounded=!0})},onBeforeShow:function(c,d){if(this.options.isInput)return!1;void 0!==this.options.title&&d.find(".msg_box__").css("padding-top",0);d.find(".buttonBox__ .button__").each(function(a,f){f.className="mdc-button "+b.string.trimToEmpty(f.className.replace(/btn_.*?__/g,""));a=f.getAttribute("data-icon");f.innerHTML=
'<div class="mdc-button__ripple"></div>'+(a?'<span class="material-icons mdc-icon-button__icon">'+a+"</span>&nbsp;":"")+'<span class="mdc-button__label">'+f.innerText+"</span>";mdc.ripple.MDCRipple.attachTo(f)})},textfield:function(c){b(".mdc-text-field",c.view).each(function(d,a){a=p(a);var f=a.attr("id"),h=a.data("label"),k=String(Math.random()).replace("0.",""),e=a.data("nolabel")?a.data("nolabel"):!1;a.is("textarea")?(a.addClass("mdc-text-field__input").removeClass("mdc-text-field"),a.attr("aria-label",
h),"outlined"===a.data("type")?(d=a.wrap('<span class="mdc-text-field__resizer"></span>').parent(),d=d.wrap('<label class="mdc-text-field mdc-text-field--outlined mdc-text-field--textarea'+(e?" mdc-text-field--no-label":"")+'"></label>').parent(),d.prepend('<span class="mdc-notched-outline"><span class="mdc-notched-outline__leading"></span><span class="mdc-notched-outline__notch">'+(e?"":'<span class="mdc-floating-label" id="'+f+"-label-"+k+'">'+h+"</span>")+'</span><span class="mdc-notched-outline__trailing"></span></span>')):
(d=a.wrap('<span class="mdc-text-field__resizer"></span>').parent(),d=d.wrap('<label class="mdc-text-field mdc-text-field--filled mdc-text-field--textarea'+(e?" mdc-text-field--no-label":"")+'"></label>').parent(),d.prepend('<span class="mdc-floating-label" id="'+f+"-label-"+k+'">'+h+"</span>"),d.prepend('<span class="mdc-text-field__ripple"></span>'),d.append('<span class="mdc-line-ripple"></span>'))):(a.css({padding:"0",border:"none"}),a.addClass("mdc-text-field__input").removeClass("mdc-text-field"),
a.attr("aria-labelledby",f+"-label-"+k),"outlined"===a.data("type")?(d=a.wrap('<label class="mdc-text-field mdc-text-field--outlined'+(e?" mdc-text-field--no-label":"")+'"></label>').parent(),d.prepend('<span class="mdc-notched-outline"><span class="mdc-notched-outline__leading"></span><span class="mdc-notched-outline__notch">'+(e?"":'<span class="mdc-floating-label" id="'+f+"-label-"+k+'">'+h+"</span>")+'</span><span class="mdc-notched-outline__trailing"></span></span>')):(d=a.wrap('<label class="mdc-text-field mdc-text-field--filled'+
(e?" mdc-text-field--no-label":"")+'"></label>').parent(),e||d.prepend('<span class="mdc-floating-label" id="'+f+"-label-"+k+'">'+h+"</span>"),d.prepend('<span class="mdc-text-field__ripple"></span>'),d.append('<span class="mdc-line-ripple"></span>')),f=a.data("btnid"),h="",f&&(h=' id="'+f+'"'),a.data("trailingicon")?(d.addClass("mdc-text-field--with-trailing-icon"),a.after("<i"+h+' class="material-icons mdc-text-field__icon mdc-text-field__icon--leading" tabindex="0" role="button">'+a.data("trailingicon")+
"</i>")):a.data("format")&&a.data("format")[0]&&"date"===a.data("format")[0][0]&&(d.addClass("mdc-text-field--with-trailing-icon"),k=b('<i class="material-icons mdc-text-field__icon mdc-text-field__icon--leading" tabindex="0" role="button">date_range</i>'),k.on("click.material.textfield.trailing.icon",function(g){g.preventDefault();a.instance("datepicker");a.trigger("focusin.datepicker")}),a.after(k)),a.data("leadingicon")&&(d.addClass("mdc-text-field--with-leading-icon"),a.before("<i"+h+' class="material-icons mdc-text-field__icon mdc-text-field__icon--trailing" tabindex="0" role="button">'+
a.data("leadingicon")+"</i>")),f&&(c["e."+f+".click"]=b("#"+f,c.view).on("click",c["e."+f+".click"])));a.data("md_textfield_inst",mdc.textField.MDCTextField.attachTo(d.get(0)))})},select:function(c){b(".mdc-njs-select",c.view).each(function(d,a){a=b(a);a.attr("required",!0);d=a.wrap('<div class="mdc-njs-select-wrap"></div>').parent();d.append('<span class="mdc-njs-select-highlight"></span>');d.append('<span class="mdc-njs-select-bar"></span>');d.append('<label class="mdc-njs-select-label">'+a.data("label")+
"</label>")})},list:function(c){b(".mdc-list",c.view).each(function(d,a){a=b(a);a.is("ul")&&(d=a.find("li").addClass("mdc-list-item"),d.prepend('<span class="mdc-list-item__ripple"></span>'),d.find("[id]").addClass("mdc-list-item__text"))})}}},codes:function(c,d,a){var f={codeUrl:null,codeKey:null};try{p.extend(!0,f,b.context.attr("template").aop.codes)}catch(l){throw b.error("N.tab",l);}p.extend(!0,f,a);var h=[];a=[];var k=[];for(g in c)"string"===b.type(g)&&b.string.startsWith(g,"p.select.")&&("array"===
b.type(c[g])&&0<c[g].length&&(c[g]=2<c[g].length?{comm:c[g][0],key:c[g][1],val:c[g][2],filter:c[g][3]}:{code:c[g][0],filter:c[g][1]}),c[g].code?h.push(g.split(".")[2]+"|"+c[g].code):c[g].comm?a.push(g.split(".")[2]+"|"+c[g].comm):k.push(g.split(".")[2]+"|select__"));0<k.length&&b(k).each(function(l,m){l=m.split("|");var n=c["p.select."+l[0]];if(n.data)c["p.select."+l[0]]=b("[id='"+l[0]+"']",c.view).filter("select,input[type='checkbox'],input[type='radio']").map(function(r,q){n.context=q;n.filter&&
(n.data=n.filter(n.data));r=b().select(n).bind();n.selected&&r.val(n.selected);return r}).get();else throw b.error(b.message.get(b.context.attr("template").message,"MSG-0001"));});if(0<h.length||0<a.length){var e=[];if(0<h.length){var g=b(h).map(function(l,m){return m.split("|")[1]}).get();e.push(b({codes:null!=g&&0===g.length?void 0:g}).comm({url:f.codeUrl}).submit(function(l){b(h).each(function(m,n){var r=n.split("|"),q=c["p.select."+r[0]];c["p.select."+r[0]]=b("[id='"+r[0]+"']",c.view).filter("select,input[type='checkbox'],input[type='radio']").map(function(t,
v){q.context=v;t=p.grep(l,function(w){return w[f.codeKey]===r[1]});t=b(q.filter?q.filter(t):t).select(q).bind();q.selected&&t.val(q.selected);return t}).get()})}).error(function(l){b.warn(l);throw b.error(b.message.get(b.context.attr("template").message,"MSG-0002"));}).request.obj.xhr)}b(a).each(function(l,m){var n=m.split("|");if(!c[n[1]])throw b.error(b.message.get(b.context.attr("template").message,"MSG-0003",[n[1]]));e.push(c[n[1]]().submit(function(r){var q=c["p.select."+n[0]];c["p.select."+
n[0]]=b("[id='"+n[0]+"']",c.view).filter("select,input[type='checkbox'],input[type='radio']").map(function(t,v){q.context=v;t=b(q.filter?q.filter(r):r).select(q).bind();q.selected&&t.val(q.selected);return t}).get()}).error(function(r){b.warn(r);throw b.error(b.message.get(b.context.attr("template").message,"MSG-0004",[n[0]]));}).request.obj.xhr)});p.when.apply(p,e).done(function(){u.aop.template(c,d)})}else u.aop.template(c,d)},template:function(c,d){b.context.attr("template").design&&u.aop.design[b.context.attr("template").design].init(c);
var a=[],f;for(f in c)"string"===b.type(f)&&b.string.startsWith(f,"p.")&&u.aop.components(c,f,a);for(f in c)"string"===b.type(f)&&b.string.startsWith(f,"e.")&&u.aop.events(c,f);b.context.attr("template").design&&u.aop.design[b.context.attr("template").design].init(c,!0);0<a.length&&(p(a).each(function(){this.resolve()}),a=void 0);d.proceed();setTimeout(function(){c.onOpenDefer&&c.onOpenDefer.resolve()},0)},components:function(c,d,a){var f=d.split(".");if(2<f.length){var h="p."+f[1]+"."+f[2],k=b("#"+
f[2],c.view),e=c[h];void 0!==e&&void 0!==e.context&&(k=b(e.context,c.view));"popup"===f[1]&&"file"===f[2]&&(e.url="file/manager.view",e.top=20,e.onOpen="onOpen",e.overlayClose=!1,e.escClose=!1);if(void 0===e||0===k.length&&void 0===e.context&&0===k.length&&void 0===e.url)throw b.error(b.message.get(b.context.attr("template").message,"MSG-0005",[c.view.data("pageid")+":"+d]));e.context=k;"button"===f[1]||"popup"===f[1]||"tab"===f[1]||"datepicker"===f[1]?((e.url&&"popup"===f[1]||"tab"===f[1])&&void 0===
e.opener&&(e.opener=c),c[h]=e.context[f[1]](e)):"select"===f[1]||e.code||(c[h]=b([])[f[1]](e));if(e.usage){var g={"search-box":{defaultButton:".btn-search",events:[]}};"object"===b.type(e.usage)&&p.extend(!0,g,e.usage);if("search-box"===e.usage||void 0!==g["search-box"]){e.context.addClass("search_box__");void 0!==e.action&&"add"===e.action||c[h].add();var l=[];d=g["search-box"].events;0<d.length&&p(d).each(function(){l.push(this.target);e.context.find(this.target).on(this.event+"."+c.view.data("pageid"),
this.handler)});e.context.on("keyup."+c.view.data("pageid"),":input:not("+l.join(",")+")",function(m){13==(m.keyCode?m.keyCode:m.which?m.which:m.charCode)&&c.view.find(g["search-box"].defaultButton).click()});if(b.browser.is("ie"))e.context.on("keyup."+c.view.data("pageid"),":input",function(m){13==(m.keyCode?m.keyCode:m.which?m.which:m.charCode)&&this.blur()})}}e.action&&a.push(p.Deferred().done(function(){if("string"===b.type(e.action))c[h][e.action]();else"array"===b.type(e.action)&&1<e.action.length&&
c[h][e.action[0]].apply(c[h],e.action.splice(1))}))}else throw b.error(b.message.get(b.context.attr("template").message,"MSG-0005",[c.view.data("pageid")+":"+d]));},events:function(c,d){var a=d.split(".");if(2<a.length){var f=a[2],h="";if("function"===b.type(c[d])){a=a[1];var k=c[d];h="#"}else if("object"===b.type(c[d]))a=c[d].target,k=c[d].handler;else throw b.error(b.message.get(b.context.attr("template").message,"MSG-0006",[c.view.data("pageid")+":"+d]));var e=b(h+a,c.view);if(0<e.length){var g=
e.closest(".list__, .grid__"),l;0<g.length&&0===e.closest("header").length?(g.hasClass("list__")?l=g.instance("list"):g.hasClass("grid__")&&(l=g.instance("grid")),l&&(e=l.tempRowEle.find(h+a),e.is(":radio, :checkbox")&&1<b("[name='"+a+"']",l.tempRowEle).length&&(e=b("[name='"+a+"']",l.tempRowEle)))):e.is(":radio, :checkbox")&&1<b("[name='"+a+"']",c.view).length&&(e=b("[name='"+a+"']",c.view));e.is("a, button, input[type=button]")?e.button():f&&-1<f.indexOf("click")&&e.css("cursor","pointer");l?(h=
e.is(":radio")||e.is(":checkbox")&&1<e.length?">.form__ [name='"+a+"']:radio, >.form__ [name='"+a+"']:checkbox":">.form__ "+h+a,c[d]=g.on(f+"."+c.view.data("pageid"),h,function(){var m=Array.apply(null,arguments);m.push(g.find(">.form__").index(p(this).closest(".form__")));k.apply(this,m)})):c[d]=e.on(f+"."+c.view.data("pageid"),k)}}else throw b.error(b.message.get(b.context.attr("template").message,"MSG-0006",[c.view.data("pageid")+":"+d]));}}}})(N)})(window,jQuery);
