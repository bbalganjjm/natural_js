/*
 Natural-CODE v0.3.8

 Released under the LGPL v2.1 license
 Date: 2019-02-28T18:00Z

 Copyright 2019 Goldman Kim(bbalganjjm@gmail.com)
*/
Object.defineProperty(exports,"__esModule",{value:!0});exports.Code=void 0;
var CodeUtils=function(){function g(){}g.isExclude=function(a,f){return a.some(function(c){return null!==f&&-1<f[0].indexOf(c)})};return g}(),Inspection=function(){function g(){}g.test=function(a,f){if(0>a.indexOf("<script"))return!1;var c=[];if(!N.context.attr("code")||N.context.attr("code")&&!N.context.attr("code").inspection)throw N.error('Define Natural-CODE options and message resources in N.context.attr("code").inspection in the natural.config.js file.');if(f)f.forEach(function(d){N.code.inspection.rules[d](a,
N.context.attr("code").inspection.excludes,c)});else for(var b in Code.inspection.rules)N.code.inspection.rules[b](a,N.context.attr("code").inspection.excludes,c);return!0};g.rules={NoContextSpecifiedInSelector:function(a,f,c){for(var b=/\/{2}.*|[N$]\((.*?)\)(.*)/gm,d;d=b.exec(a);){var e=CodeUtils.isExclude(f,d);2<d.length&&d[2]&&-1<d[2].replace(/ /g,"").indexOf("view)")&&(e=!0);N.string.startsWith(d[0],"//")&&(e=!0);var h=N.string.trimToEmpty(d[1]).replace(/ /g,"");if(/^["']/g.test(h)&&(e||(/[()]|,view|,cont\.view|",|',|^"<|^'<|>"$|>'$|html|body/g.test(h)&&
(e=!0),!/,view|,cont.view/g.test(h)&&/"\+|'\+|\+"|\+'/g.test(h)&&(e=!1)),e||/^\.cont\(|^\.comm\(|^\.select\(|^\.form\(|^\.list\(|^\.grid\(|^\.pagination\(|^\.tree\(|^\.instance\(/g.test(d[2])&&(e=!0),!e)){e="";try{e=a.substring(a.indexOf("<script"),a.indexOf("\x3c/script>"))}catch(k){N.warn(k)}-1<e.indexOf(d[0])&&c.push({level:"ERROR",message:N.message.get(N.context.attr("code").inspection.message,"NoContextSpecifiedInSelector"),line:a.substring(0,b.lastIndex).split("\n").length,code:d[0]})}}},UseTheComponentsValMethod:function(a,
f,c){for(var b=/\/{2}.*|[N$]\((.*?)\)\.val\((.*?)\)(.*)/gm,d;d=b.exec(a);){var e=CodeUtils.isExclude(f,d);e||N.string.isEmpty(d[2])&&(e=!0);N.string.startsWith(d[0],"//")&&(e=!0);if(!e){e="";try{e=a.substring(a.indexOf("<script"),a.indexOf("\x3c/script>"))}catch(h){N.warn(h)}-1<e.indexOf(d[0])&&c.push({level:"WARN",message:N.message.get(N.context.attr("code").inspection.message,"UseTheComponentsValMethod"),line:a.substring(0,b.lastIndex).split("\n").length,code:d[0]})}}}};g.report={console:function(a,
f){var c="black";a.forEach(function(b){if(N.context.attr("code").inspection.abortOnError&&"ERROR"===b.level)throw N.error("["+b.level+"] "+f+" - "+b.line+" : "+b.code+"\n"+b.message+"\n\n");if(N.browser.is("ie"))N[b.level.toLowerCase()]("["+b.level+"] "+f+" - "+b.line+" : "+b.code,"\n"+b.message);else"ERROR"===b.level?c="red":"WARN"===b.level&&(c="blue"),N[b.level.replace("ERROR","WARN").toLowerCase()]("%c["+b.level+"] "+f+" - "+b.line+" : "+b.code,"color: "+c+"; font-weight: bold; line-height: 200%;",
"\n"+b.message)})}};return g}(),Code=function(){function g(){}g.addSourceURL=function(a,f){if(0>a.indexOf("<script"))return a;var c=a.lastIndexOf("\n\x3c/script>");0>c&&(c=a.lastIndexOf("\t\x3c/script>"));0>c&&(c=a.lastIndexOf(" \x3c/script>"));return[a.slice(0,c),"\n//# sourceURL="+f+"\n",a.slice(c)].join("")};g.inspection=Inspection;return g}();exports.Code=Code;N.code=Code;N.version["Natural-CODE"]="0.3.8";
