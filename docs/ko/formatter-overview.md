# 개요

Formatter(N.formatter)는 입력한 데이터셋(JSON object array)을 포맷팅하고 포맷팅된 데이터셋을 반환해 주는 라이브러리입니다.

* 룰셋 대신 data-format 속성으로 포맷 룰들이 선언된 요소들을 감싸고 있는 요소를 인수로 입력하면 해당 요소에 포맷팅된 문자열을 표시해 줍니다.
* 이때 요소가 텍스트를 입력하는 요소라면 커서가 focusin 될 때 원래 데이터의 문자열을 표시해 주고 focusout 되면 포맷팅된 문자열을 표시해 줍니다.
* 데이터셋이 아닌 문자열 단위로도 포맷을 할 수 있습니다.

## Formatter의 목적

Natural-JS의 Formatter 라이브러리는 다음과 같은 구조화된 방법을 제공합니다:

1. 원시 데이터를 사용자 친화적인 형식(예: 날짜, 숫자, 통화 포맷팅)으로 변환
2. 애플리케이션 전체에 일관된 포맷팅 규칙 적용
3. 원본 데이터 값을 보존하면서 표시 포맷팅을 자동으로 처리
4. 데이터셋 수준과 개별 문자열 수준 모두에서 포맷팅 지원

## Formatter 작동 방식

Formatter는 데이터에 미리 정의된 포맷 규칙을 적용하여 작동합니다. 이러한 포맷 규칙은 두 가지 방법으로 지정할 수 있습니다:

1. **룰셋 객체**: 포매터 함수에 직접 전달
2. **data-format 속성**: HTML 요소에 선언

포맷팅이 적용되면 라이브러리는 지정된 규칙에 따라 입력 데이터를 처리하고 포맷팅된 결과를 반환합니다. 폼 요소의 경우, 원본 값을 내부적으로 유지하면서 사용자에게 포맷팅된 값을 표시합니다.

```
┌─────────────────┐         ┌─────────────────┐         ┌─────────────────┐
│                 │         │                 │         │                 │
│    원시 데이터   │ ──────► │    Formatter    │ ──────► │ 포맷팅된 데이터  │
│                 │         │                 │         │                 │
└─────────────────┘         └─────────────────┘         └─────────────────┘
                                     │
                                     ▼
                            ┌─────────────────┐
                            │                 │
                            │   포맷 규칙     │
                            │                 │
                            └─────────────────┘
```

## 주요 기능

### 데이터셋 포맷팅

Formatter는 전체 데이터셋(객체 배열)을 처리하여 지정된 속성에 포맷 규칙을 적용할 수 있습니다. 이는 표 형식 데이터나 레코드 컬렉션을 포맷팅할 때 특히 유용합니다.

### 요소 기반 포맷팅

HTML 요소와 함께 사용할 때 Formatter는 자동으로 다음을 수행할 수 있습니다:
- data-format 속성을 기반으로 값 포맷팅
- 포커스 시 입력 요소에 대해 포맷팅된 값과 원시 값 사이 전환
- 원본 데이터를 보존하면서 표시 값 업데이트

### 문자열 포맷팅

데이터셋과 요소 외에도 Formatter는 특정 포맷 규칙에 따라 개별 문자열 값을 포맷팅하는 함수도 제공합니다.

## Natural-JS와의 통합

Formatter는 다른 Natural-JS 컴포넌트와 원활하게 작동하도록 설계되었습니다:

- **Communicator** 컴포넌트를 통해 검색된 데이터를 포맷팅하는 데 사용할 수 있습니다
- 폼 유효성 검사를 위해 **Validator** 컴포넌트와 통합됩니다
- **UI** 컴포넌트에 표시되는 데이터에 적용할 수 있습니다

이러한 통합을 통해 Natural-JS 애플리케이션 전체에서 데이터 포맷팅에 일관된 접근 방식을 제공합니다.
