<article class="exap0602 view-code" >
	<div class="searchBox">
		<ul>
			<li class="buttons">
				<a id="btnSave" href="#" data-opts='{ "color" : "gray" }'>저장</a>
				<a id="btnRevert" href="#">초기화</a>
				<a id="btnList" href="#">목록</a>
			</li>
		</ul>
	</div>

	<table id="detail" class="form" style="width: 100%;">
		<tr>
			<th rowspan="11" style="width: 15%;" align="right">picture</th>
			<td rowspan="11" style="width: 35%;" align="center" valign="middle"><img id="picture" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" width="100%" /></td>
			<th style="width: 15%;"><label for="name">Name</label></th>
			<td style="width: 35%;"><input id="name" type="text" data-validate='[["required"]]' /></td>
		</tr>
		<tr>
			<th><label for="email">Email</label></th>
			<td><input id="email" type="text" data-validate='[["required"], ["email"]]' /></td>
		</tr>
		<tr>
			<th><label for="key">Password</label></th>
			<td><input id="key" type="text" data-format='[["generic", "@@＊＊＊＊＊＊"]]' data-validate='[["required"]]' /></td>
		</tr>
		<tr>
			<th><label for="balance">Balance</label></th>
			<td><input id="balance" type="text" data-format='[["numeric", "$#,###.##0"]]' data-validate='[["required"], ["number"]]' /></td>
		</tr>
		<tr>
			<th><label for="phone">Phone</label></th>
			<td><input id="phone" type="text" data-validate='[["required"]]' /></td>
		</tr>
		<tr>
			<th><label for="age">Age</label></th>
			<td><input id="age" type="text" data-validate='[["required"], ["integer"]]' /></td>
		</tr>
		<tr>
			<th><label for="eyeColor">Eye color</label></th>
			<td>
				<select id="eyeColor" data-validate='[["required"]]'>
					<option>선택</option>
				</select>
			</td>
		</tr>
		<tr>
			<th><label for="company">Company</label></th>
			<td><select id="company" multiple="multiple" data-validate='[["required"]]' style="height: 117px;"></select></td>
		</tr>
		<tr>
			<th><label for="gender">Gender</label></th>
			<td><input id="gender" type="radio" /></td>
		</tr>
		<tr>
			<th><label for="favoriteFruit">Favorite fruit</label></th>
			<td><input id="favoriteFruit" type="checkbox" /></td>
		</tr>
		<tr>
			<th><label for="registered">Registered</label></th>
			<td><input id="registered" type="text" data-format='[["date", 8, "date"]]' data-validate='[["required"]]' /></td>
		</tr>
		<tr>
			<th><label for="about">About</label></th>
			<td colspan="3"><textarea id="about" style="width: 95%;" rows="3" data-format='[["limit", "100", "..."]]' data-validate='[["required"]]'></textarea></td>
		</tr>
		<tr>
			<th><label for="greeting">Greeting</label></th>
			<td colspan="3"><textarea id="greeting" style="width: 95%;" rows="2"></textarea></td>
		</tr>
		<tr>
			<th><label for="isActive">Active</label></th>
			<td colspan="3"><input id="isActive" type="checkbox" /></td>
		</tr>
	</table>
</article>

<script type="text/javascript">
N(".exap0602").cont({
	genderCodes: [{
    	"key" : "male",
    	"val" : "male"
	    },{
	    	"key" : "female",
	    	"val" : "female"
	}],
	eyeColorCodes: [{
	    	"key" : "blue",
	    	"val" : "blue"
	    },{
	    	"key" : "brown",
	    	"val" : "brown"
	    },{
	    	"key" : "green",
	    	"val" : "green"
	}],
	companyCodes: [{
	    	"key" : "PROSELY",
	    	"val" : "PROSELY"
	    },{
	    	"key" : "ASSISTIX",
	    	"val" : "ASSISTIX"
	    },{
	    	"key" : "VORATAK",
	    	"val" : "VORATAK"
	    },{
	    	"key" : "CANDECOR",
	    	"val" : "CANDECOR"
	    },{
	    	"key" : "BARKARAMA",
	    	"val" : "BARKARAMA"
	    },{
	    	"key" : "STOCKPOST",
	    	"val" : "STOCKPOST"
	    },{
	    	"key" : "MICROLUXE",
	    	"val" : "MICROLUXE"
	    },{
	    	"key" : "SHADEASE",
	    	"val" : "SHADEASE"
	    },{
	    	"key" : "ZENTIA",
	    	"val" : "ZENTIA"
		},{
	    	"key" : "INTRADISK",
	    	"val" : "INTRADISK"
	}],
	favoriteFruitCodes: [{
	    	"key" : "apple",
	    	"val" : "apple"
	    },{
	    	"key" : "strawberry",
	    	"val" : "strawberry"
	    },{
	    	"key" : "banana",
	    	"val" : "banana"
	}],
    init : function(view, request) {
    	// 1. initialize buttons
    	N(".buttons a", view).button();

    	// 2. initialize N.select and bind select data
    	// 2-1. create #gender select
		N(this.genderCodes).select(N("#detail #gender", view)).bind().val("male");
		// 2-2. create #eyeColor select
		N(this.eyeColorCodes).select(N("#detail #eyeColor", view)).bind();
		// 2-3. create #company select
		N(this.companyCodes).select(N("#detail #company", view)).bind();
		// 2-4. create #favoriteFruit select
		N(this.favoriteFruitCodes).select(N("#detail #favoriteFruit", view)).bind();

    	// 3. initialize N.form
    	var form = N([]).form({
    		context : N("#detail", view),
    		revert : true
    	});
		if(request.attr("selData") !== undefined) {
			// 3-1-1. N.form data bind
			form.bind(0, request.attr("selData"));
		} else {
			// 3-1-2. N.form data bind
			form.add();
		}

    	// 4. bind events
    	// 4-1 Save data to server
    	N("#btnSave", view).click(function(e) {
            e.preventDefault();
            if(form.data(true)[0].rowStatus === undefined) {
            	N(window).alert("변경된 데이터가 없습니다.").show();
            	return false;
            }
            if(form.validate()) {
            	N(window).alert({
            		msg : "저장 하시겠습니까?",
            		confirm : true,
            		onOk : function() {
            			N(window).alert({
                 			title : "서버로 전송되는 파라미터",
                 			msg : "<pre style='width: 450px; overflow: auto;'>" + N.json.format(form.data(true)[0]).replace(/\\/g, "") + "</pre>",
                 			onOk : function() {
                 				// Go to list page
                    			N("#btnList", view).click();
                 			}
                 		}).show();
            		}
            	}).show();
            }
        });
    	// 4-2 Revert to initialized data
    	N("#btnRevert", view).click(function(e) {
    		e.preventDefault();
    		form.revert();
    	});

    	// 3-3 Go to list page
    	N("#btnList", view).click(function(e) {
    		e.preventDefault();
    		// Return list page with search condition data
    		N(N.context.attr("architecture").page.context).comm("html/exap/exap0600.html")
    			.request.attr("scData", request.attr("scData"))
					.request.attr("pageNo", request.attr("pageNo"))
						.submit();
    	});
    }
});
</script>