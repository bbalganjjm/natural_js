<article class="exap0701 view-code" >
	<table id="detail" class="form" style="width: 100%;">
		<tr>
			<th rowspan="11" style="width: 15%;" align="right">picture</th>
			<td rowspan="11" style="width: 35%;" align="center" valign="middle"><img id="picture" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" width="100%" /></td>
			<th style="width: 15%;">Name</th>
			<td id="name" style="width: 35%;"></td>
		</tr>
		<tr>
			<th>Email</th>
			<td id="email"></td>
		</tr>
		<tr>
			<th>Password</th>
			<td id="key" data-format='[["generic", "@@＊＊＊＊＊＊"]]'></td>
		</tr>
		<tr>
			<th>Balance</th>
			<td id="balance" data-format='[["numeric", "$#,###.##0"]]'></td>
		</tr>
		<tr>
			<th>Phone</th>
			<td id="phone"></td>
		</tr>
		<tr>
			<th>Age</th>
			<td id="age"></td>
		</tr>
		<tr>
			<th>Eye color</th>
			<td id="eyeColor"></td>
		</tr>
		<tr>
			<th>Company</th>
			<td id="company"></td>
		</tr>
		<tr>
			<th>Gender</th>
			<td id="gender"></td>
		</tr>
		<tr>
			<th>Favorite fruit</th>
			<td id="favoriteFruit"></td>
		</tr>
		<tr>
			<th>Registered</th>
			<td id="registered" data-format='[["date", 8]]'></td>
		</tr>
		<tr>
			<th>About</th>
			<td id="about" colspan="3" data-format='[["limit", 70, "..."]]'></td>
		</tr>
		<tr height="67">
			<th>Greeting</th>
			<td id="greeting" colspan="3"></td>
		</tr>
		<tr>
			<th>Active</th>
			<td id="isActive" colspan="3"></td>
		</tr>
	</table>
	<div class="buttons" align="center">
		<a id="btnAdd" href="#" data-opts='{ "color": "green" }'>추가</a>
		<a id="btnEdit" href="#" data-opts='{ "color" : "gray" }'>수정</a>
		<a id="btnDelete" href="#" data-opts='{ "color": "green" }'>삭제</a>
		<a id="btnClose" href="#">닫기</a>
	</div>
</article>

<script type="text/javascript">
N(".exap0701").cont({
    init : function(view, request) {
    	var this_ = this;
    	// 1. initialize buttons
    	N(".buttons a", view).button();

    	// 2. initialize N.form
    	var form = this.form = N([]).form(N("#detail", view));

     	// 3. bind events
     	// 3-1 Go to create page
    	N("#btnAdd", view).click(function(e) {
    		e.preventDefault();
    		
    		N.ds.instance(form).remove();
    		
    		// Grid row select event
        	view.parent().comm("html/exap/exap0702.html")
        		.request.attr("selData", this_.selData) // send seleted row data
       				.request.attr("caller", this_.caller) // send caller(this popup opener instance) object
       					.request.attr("mode", "create") // edit mode flag
     						.submit();
    	});
     	// 3-2 Go to edit page
    	N("#btnEdit", view).click(function(e) {
    		e.preventDefault();
    		
    		// Grid row select event
        	view.parent().comm("html/exap/exap0702.html")
        		.request.attr("selData", this_.selData) // send seleted row data
        			.request.attr("caller", this_.caller) // send caller(this popup opener instance) object
	   					.request.attr("mode", "edit") // edit mode flag
	       					.submit();
    	});
    	// 3-3 Delete
    	N("#btnDelete", view).click(function(e) {
    		e.preventDefault();
    		N(window).alert({
        		msg : "현재보고 있는 행을 삭제 하시겠습니까?<br/>그리드의 저장 버튼을 누르기 전까지는 서버에 적용되지 않습니다.",
        		confirm : true,
        		onOk : function() {
        			// romove row
        			this_.selData.grid.remove(this_.selData.row);
        			this_.caller.close()
        		}
        	}).show();
    	});
    	// 3-4 Close this popup
    	// this.caller is popup instance that called this page
    	N("#btnClose", view).click(function(e) {
    		e.preventDefault();
    		this_.caller.close();
    	});
    },
    /**
     * Popup's onOpen callback
     */
    onOpen : function(onOpenData) {
    	this.selData = onOpenData;
    	// 2-1. Data bind that transfered by onOpen's argument
    	this.form.bind(this.selData.row, this.selData.data);
    }
});
</script>